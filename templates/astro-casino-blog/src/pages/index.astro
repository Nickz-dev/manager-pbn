---
import siteData from '../data/site-data.json';

const { site, articles, categories, authors } = siteData;

// –ü–æ–ª—É—á–∞–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–µ —Å—Ç–∞—Ç—å–∏
const latestArticles = articles
  .filter(article => article.publishedAt)
  .sort((a, b) => new Date(b.publishedAt).getTime() - new Date(a.publishedAt).getTime())
  .slice(0, 9);

// –ü–æ–ª—É—á–∞–µ–º –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
const popularCategories = categories.slice(0, 5);

// –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
const structuredData = {
  "@context": "https://schema.org",
  "@type": "WebSite",
  "name": site.name,
  "url": `https://${site.domain}`,
  "description": site.description,
  "publisher": {
    "@type": "Organization",
    "name": site.name,
    "url": `https://${site.domain}`
  }
};

// –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º Open Graph –¥–∞–Ω–Ω—ã–µ
const ogData = {
  title: site.name,
  description: site.description,
  url: `https://${site.domain}`,
  type: 'website',
  site_name: site.name,
  image: site.og_image || `/images/default-og.jpg`
};
---

<!DOCTYPE html>
<html lang={site.config?.language || 'en'}>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="#10b981">
  
  <!-- Primary Meta Tags -->
  <title>{site.name} - {site.description}</title>
  <meta name="title" content={site.name}>
  <meta name="description" content={site.description}>
  <meta name="keywords" content={site.keywords?.join(', ') || ''}>
  <meta name="author" content={site.name}>
  <meta name="robots" content="index, follow">
  <meta name="language" content={site.config?.language || 'en'}>
  
  <!-- Canonical URL -->
  <link rel="canonical" href={`https://${site.domain}`}>
  
  <!-- Open Graph / Facebook -->
  <meta property="og:type" content={ogData.type}>
  <meta property="og:url" content={ogData.url}>
  <meta property="og:title" content={ogData.title}>
  <meta property="og:description" content={ogData.description}>
  <meta property="og:image" content={ogData.image}>
  <meta property="og:site_name" content={ogData.site_name}>
  <meta property="og:locale" content={site.config?.language || 'en_US'}>
  
  <!-- Twitter -->
  <meta property="twitter:card" content="summary_large_image">
  <meta property="twitter:url" content={ogData.url}>
  <meta property="twitter:title" content={ogData.title}>
  <meta property="twitter:description" content={ogData.description}>
  <meta property="twitter:image" content={ogData.image}>
  
  <!-- Favicon -->
  <link rel="icon" type="image/svg+xml" href="/favicon.svg">
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">
  
  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- Preload critical resources -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="preload" href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700;900&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700;900&display=swap"></noscript>
  
  <!-- Google Analytics -->
  {site.analytics?.googleAnalytics && (
    <script async src={`https://www.googletagmanager.com/gtag/js?id=${site.analytics.googleAnalytics}`}></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', '{site.analytics.googleAnalytics}', {
        page_title: '{site.name}',
        page_location: '{ogData.url}'
      });
    </script>
  )}
  
  <!-- Structured Data -->
  <script type="application/ld+json" set:html={JSON.stringify(structuredData)}></script>
  
  <style>
    :root {
      --primary-color: #10b981;
      --primary-hover: #059669;
      --accent-color: #3b82f6;
      --accent-hover: #2563eb;
      --bg-primary: #ffffff;
      --bg-secondary: #f8fafc;
      --bg-accent: #f1f5f9;
      --text-primary: #1e293b;
      --text-secondary: #475569;
      --text-muted: #64748b;
      --border-color: #e2e8f0;
    }
    
    body {
      font-family: 'Roboto', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: var(--bg-primary);
      color: var(--text-primary);
      line-height: 1.6;
    }
  </style>
</head>
<body>
  <header class="bg-gradient-to-r from-green-500 to-blue-500 text-white py-16">
    <div class="container mx-auto px-4 text-center">
      <h1 class="text-5xl font-bold mb-4">üé∞ {site.name}</h1>
      <p class="text-xl opacity-90 max-w-2xl mx-auto">{site.description}</p>
    </div>
  </header>

  <main class="py-16">
    <div class="container mx-auto px-4">
      {latestArticles.length > 0 ? (
        <>
          <h2 class="text-4xl font-bold text-center mb-12">Latest Casino Reviews</h2>
          <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 mb-16">
            {latestArticles.map((article, index) => (
              <article class="bg-white rounded-lg shadow-lg overflow-hidden hover:shadow-xl transition-shadow duration-300">
                <a href={`/articles/${article.slug}`} class="block">
                  {index === 0 && (
                    <div class="absolute top-4 right-4 bg-gradient-to-r from-green-500 to-blue-500 text-white px-3 py-1 rounded-full text-sm font-semibold">
                      Featured
                    </div>
                  )}
                  {article.featured_image ? (
                    <img 
                      src={article.featured_image} 
                      alt={article.title} 
                      class="w-full h-48 object-cover"
                      loading="lazy"
                    />
                  ) : (
                    <div class="w-full h-48 bg-gradient-to-br from-gray-200 to-gray-300 flex items-center justify-center text-gray-500 text-xl">
                      üé∞ No Image
                    </div>
                  )}
                  <div class="p-6">
                    <h3 class="text-xl font-bold mb-3 text-gray-900 line-clamp-2">{article.title}</h3>
                    {article.excerpt && (
                      <p class="text-gray-600 mb-4 line-clamp-3">{article.excerpt}</p>
                    )}
                    <div class="flex justify-between items-center text-sm text-gray-500">
                      <div class="flex items-center gap-2">
                        <div class="w-6 h-6 bg-gradient-to-r from-green-500 to-blue-500 rounded-full flex items-center justify-center text-white text-xs font-semibold">
                          {(article.author?.name || 'A').charAt(0).toUpperCase()}
                        </div>
                        <span>{article.author?.name || 'Anonymous'}</span>
                      </div>
                      <span>
                        {article.publishedAt ? new Date(article.publishedAt).toLocaleDateString() : 'No date'}
                      </span>
                    </div>
                  </div>
                </a>
              </article>
            ))}
          </div>
        </>
      ) : (
        <div class="text-center py-16">
          <h2 class="text-3xl font-bold mb-4">No articles available</h2>
          <p class="text-gray-600">Check back soon for new content!</p>
        </div>
      )}

      {popularCategories.length > 0 && (
        <div class="mb-16">
          <h2 class="text-4xl font-bold text-center mb-12">Popular Categories</h2>
          <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            {popularCategories.map((category) => (
              <a href={`/categories/${category.slug}`} class="block">
                <div class="bg-white rounded-lg shadow-md p-6 text-center hover:shadow-lg transition-shadow duration-300">
                  <h3 class="text-xl font-semibold mb-2 text-gray-900">{category.name}</h3>
                  <p class="text-gray-600">Explore the latest content in {category.name.toLowerCase()}</p>
                </div>
              </a>
            ))}
          </div>
        </div>
      )}
    </div>
  </main>

  <footer class="bg-gray-100 border-t border-gray-200 py-12">
    <div class="container mx-auto px-4">
      <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
        <div>
          <h3 class="text-xl font-semibold mb-4">About {site.name}</h3>
          <p class="text-gray-600">{site.description}</p>
        </div>
        <div>
          <h3 class="text-xl font-semibold mb-4">Categories</h3>
          <ul class="space-y-2">
            {popularCategories.map((category) => (
              <li><a href={`/categories/${category.slug}`} class="text-gray-600 hover:text-green-500 transition-colors">{category.name}</a></li>
            ))}
          </ul>
        </div>
        <div>
          <h3 class="text-xl font-semibold mb-4">Contact</h3>
          <p class="text-gray-600">Email: info@{site.domain}</p>
          <p class="text-gray-600">Follow us on social media</p>
        </div>
      </div>
      <div class="text-center mt-8 pt-8 border-t border-gray-200 text-gray-500">
        <p>&copy; {new Date().getFullYear()} {site.name}. All rights reserved.</p>
      </div>
    </div>
  </footer>
</body>
</html>